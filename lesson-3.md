---
description: 学习有关数据类型相互转换的知识，了解 C++ 中的各种运算符及其使用
---

# Lesson 3

{% hint style="info" %}
请注意，在本页面所显示的代码段中，可能出现行内缩进过多或过少等现象，这是不同笔记软件和集成开发环境所预设的制表符长度不同所导致的，属正常现象。
{% endhint %}

## 一、数据类型转换

### 1.1 隐式类型转换

在[上一课中 1.3.1 的应用代码](lesson-2.md#1.3.1-ascii-dai-ma)中，我们实现了输入大写字母而输出对应小写字母的程序。

```cpp
#include<iostream>
using namespace std;
int main(){
	char a, b;
	cin >> a;
	b = a + 32;
	cout << b;
	return 0;
}
```

上面的代码的第 5 行中，我们输入的字符存入字符型变量 `a`，在第 6 行做运算的时候，因为是`char` 类型与 `int` 类型相加，程序会自动将 `a` 转换为 `int` 类型得到计算之后的 ASCII 码。第 7 行输出时，由于 `b` 本身是字符型变量，所以输出的也是字符而非整数。这样的数据类型转换称为**隐式转换**或**自动类型转换**。

隐式转换的规则在于，**总是将占用内存小的数据类型转换为占用内存大的数据类型进行运算**。比如，当 `float` 和 `double` 运算时，会把二者都转换为 `double`。而且，只有两个**不同数据类型**进行运算时才会触发隐式转换。

### 1.2 强制类型转换

```cpp
char a = A;
cout << int(a);
```

上面的代码运行后会输出 A 的 ASCII 代码 65。在这里，我们将字符型变量 `a` **强制转换**成了整型变量，所以输出时不会输出 `A` 字符而是输出其 ASCII 码。这样的转换方式也称为**显式转换**。在 C++ 中，对变量进行强制转换类型的方法与 Python 相似，可以通过这样的代码呈现：

```cpp
目标数据类型(需要转换的内容);
```

强制转换有这几种形式——

1. 数字转字符；
2. 字符转数字；
3. 小数转整数（去掉小数部分）。

## 二、运算符

### 2.1 算术运算符

C++ 中的算术运算符包含常见的 `+`、`-`、`*`、`/` 和 `%`，分别表示加、减、乘、除和取余（只取被除数除以除数的余数）。

我们会发现，当进行整数除法运算时，常常会出现结果不为整数的情况。如果只用运算符 `/`，则会输出结果的整数商而忽略小数部分。如果想要商的小数部分呈现出来，则需要让 `/` 的两边至少一个数字以浮点数的形式表示，最简单的方法就是把其中一个整数强制转换为浮点数，或者直接在整数后加上 `.0`。作其他算数运算时亦如此。

C++ 中的算术运算遵循数学运算规则，从左到右，先乘除取余后加减。

**应用一**

实现输入华氏度，转换成摄氏度，保留 5 位小数并输出的效果。

```cpp
#include <iostream>
#include <iomanip>
using namespace std;
int main(){
	// 声明 c 和 f 两个双精度浮点数变量
	double c, f;
	// 输入 f
	cin >> f;
	// 换算 c
	c = 5 * (f - 32) / 9;
	// 输出保留到五位小数的结果
	cout << fixed << setprecision(5) << c;
	return 0;
}
```

**应用二**

输入球的半径，计算球的体积。（$$V_{球} = \dfrac{4}{3} \times \pi \times r^{3}$$，保留 2 位小数，$$\pi$$ 取 3.14）

```cpp
#include <iostream>
#include <iomanip>
using namespace std;
int main(){
	double r, v;
	cin >> r;
    // 将 4 写成 4.0 是为了让 4/3 的计算结果以浮点数形式呈现
	v = 4.0 / 3 * 3.14 * r * r * r;
	cout << fixed << setprecision(2) << v;
	return 0;
}
```

#### 2.1.1 复合运算符

复合运算符包含 `+=`、`-=`、`*=`、`/=` 和 `%=`， 分别表示自增、自减、自乘、自除和自取余。假设我们先前已经声明了整型变量 `a` 等于 10。则有——

* `a += 5` 等价于 `a = a + 5` 所以结果为 15；
* `a -= 5` 等价于 `a = a - 5` 所以结果为 5；
* `a *= 5` 等价于 `a = a * 5` 所以结果为 50；
* `a /= 5` 等价于 `a = a / 5` 所以结果为 2；
* `a %= 5` 等价于 `a = a % 5` 所以结果为 0。

而且，还可以把 `a += 1` 进一步简写为 `a++` 或 `++a`。注意，二者并**不等价**。

### 2.2 关系运算符

C++ 中的关系运算符包括 `>`、`<`、`>=`、`<=`、`!=` 和 `==` 六种，分别表示大于、小于、大于或等于、小于或等于、不等于和等于。关系运算的结果只能是 `True` 或 `False` 即布尔值。

#### 2.2.1 基本条件判断语句

```cpp
if (判断条件){
    // 执行语句
} else {
    // 执行语句
}
```

上例是基本的条件判断语句。如果满足判断条件，则执行 `if` 后的语句，否则执行 `else` 后的语句。`if` 语句也可独立存在。

**应用一**

判断输入的两个整数是否相等，如果相等则输出 `Y`。

```cpp
#include <iostream>
using namespace std;
int main(){
	int a, b;
	cin >> a >> b;
	if(a == b){
		cout << 'Y';
	}
	return 0;
}
```

**应用二**

判断输入的整数是否为 120，如果是输出 `Go wherever you want!` 否则输出 `You wish!`。

```cpp
#include <iostream>
using namespace std;
int main(){
	int score;
	cin >> score;
	if (score == 120){
		cout << "Go wherever you want!";
	} else {
		cout << "You wish!";
	}
	return 0;
}
```

**应用三**

判断输入的整数是否在 110 及以上，如果是输出 `Go play!` 否则输出 `Grounded!`。

```cpp
#include <iostream>
using namespace std;
int main(){
	int score;
	cin >> score;
	if (score >= 110){
		cout << "Go play!";
	} else {
		cout << "Grounded!";
	}
	return 0;
}
```

**应用四**

判断输入的整数是奇数还是偶数，若是奇数则输出 `Y`，是偶数则输出 `N`。

```cpp
#include <iostream>
using namespace std;
int main(){
	int num;
	cin >> num;
    // 通过对 2 取余判断奇偶性
	if (num % 2 == 1){
		cout << 'Y';
	} else {
		cout << 'N';
	}
	return 0;
}
```

## 三、程序结构

常见的程序结构分为顺序结构、分支结构和循环结构。条件判断语句就是一种分支结构。
