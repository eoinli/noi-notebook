---
description: 学习有关字符串的知识，认识函数并学习其用法
---

# Lesson 15

{% hint style="info" %}
请注意，在本页面所显示的代码段中，可能出现行内缩进过多或过少等现象，这是不同笔记软件和集成开发环境所预设的制表符长度不同所导致的，属正常现象。
{% endhint %}

## 一、复习巩固

### 1.1 字符数组操作

#### 1.1.1 获取包含空格的字符串

可以使用头文件 `cstring` 中的 `getline()` 函数获取输入内容中包含字符串的一整行内容。

```cpp
#include<cstring>
// ...
cin.getline(charArray, space);
```

#### 1.1.2 对字符串进行大小写翻转

```cpp
// ...

cin.getline(a, 105);

for (int i = 0; i < strlen(a); i++) {
    if (a[i] >= 'A' && a[i] <= 'Z') // 判断所输入字符是否在大写字母范围内
        a[i] += ('a' - 'A'); // 转小写
    else if (a[i] >= 'a' && a[i] <= 'z') // 判断所输入字符是否在小写字母范围内
        a[i] += ('A' - 'a'); // 转大写
}

for (int i = 0; i < strlen(a); i++) 
    cout << a[i];
```

#### 1.1.3 对字符串进行字符分类统计

输入一个字符串，分别统计并输出其中大写字母、小写字母、数字和其他字符（不含空格）的数量。

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
	char a[105]; int cap = 0, small = 0, num = 0, other = 0;
	cin.getline(a, 105);
	for (int i = 0; i < strlen(a); i++)
		if (a[i] != ' ')
			if (a[i] >= 'A' && a[i] <= 'Z') cap++;
			else if (a[i] >= 'a' && a[i] <= 'z') small++;
			else if (a[i] >= '0' && a[i] <= '9') num++;
			else other++;
		
	cout << cap << " " << small << " " << num << " " << other;
	return 0;
}
```

#### 1.1.4 字符串移位

输入一个不带空格的英文字符串，给定一个数字 n，将字符串中的小写字母转换为大写字母、大写字母转换为小写字母，并按字母表顺序向后移动 n 位（z 往后移一位到 a）。

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
	char a[105]; int n;
	cin >> a >> n;
	
	for (int i = 0; i < strlen(a); i++) {
	    if (a[i] >= 'A' && a[i] <= 'Z')
	        a[i] = (a[i] - 'A' + n)%26 + 'a';
	    else if (a[i] >= 'a' && a[i] <= 'z')
	        a[i] = (a[i] - 'a' + n)%26 + 'A';
	}
	
	for (int i = 0; i < strlen(a); i++) 
	    cout << a[i];
	return 0;
}

// 输入：abcXYZ 2
// 输出：CDEzab
```

#### 1.1.5 字符串倒序输出

**1.1.5.1 整个字符串逐字符倒序输出**

效果举例：输入 `abcdefg`，输出 `gfedcba`。

```cpp
// ...

int main() {
	char s[105];
	cin >> s;
	for (int i = strlen(s)-1; i >= 0; i--)
		cout << s[i];
	return 0;
}
```

**1.1.5.2 各单词内部逐字符倒序输出**

效果举例：输入 `turn left`，输出 `nrut tfel`。

```cpp
#include <bits/stdc++.h>
#define N 505
using namespace std;

int main() {
	char a[N];
	cin.getline(a, N);
	int lena, start = 0, flag = 0;
	lena = strlen(a);

	for (int i = 0; i < lena; i++) {				// 对每一个字符进行遍历

		if (a[i] == ' ' || i == lena - 1) {			// 如果当前字符是空格或最后一个字符
			flag++;						// 则标记需要输出空格

			if (i == lena - 1)				// 如果是最后一个字符
				for (int j = i; j >= start; j--) 	// 则从最后一个字符开始
					cout << a[j];			// 到上一个空格之后的一个字符结束，倒序输出字符

			else						// 如果是空格
				for (int j = i-1; j >= start; j--) 	// 则从空格的前一个字符开始
					cout << a[j];			// 到上一个空格之后的一个字符结束，倒序输出字符

			if (flag) {					// 如果标记了要输出空格
				cout << " ";				// 则输出一个空格
				flag = 0;				// 并把标记变量还原
			}

			start = i+1;					// 把上界修改为当前空格字符的后一个字符
		}
	}
	cout << endl;
	return 0;
}
```

## 二、字符串

### 2.1 头文件 string

头文件 `string` 对很多字符数组的操作进行了简化和打包，相对于 `cstring` 来说更为简便，也更为常用。

#### 2.1.1 部分函数和关键字

| 关键字、函数和参数                  | 用途                                                                     | 备注                       |
| -------------------------- | ---------------------------------------------------------------------- | ------------------------ |
| `string strName;`          | 直接创建字符串 `strName`（不用声明长度）                                              |                          |
| `getline(cin, strName)`    | 获取整行内容并存入 `strName` 字符串                                                |                          |
| `strName.length()`         | 获取字符串 `strName` 的长度                                                    |                          |
| `strName.size()`           | 获取字符串 `strName` 的大小                                                    |                          |
| `strOne.find(strTwo, pos)` | 在 `strOne` 中从下标为 `pos` 的字符开始搜索字符串 `strTwo`，返回第一个找到的 `strTwo` 字符串首字符的下标 | `pos` 参数可以省略，默认由下标 0 开始。 |

#### 2.1.2 部分运算符

| 运算符                 | 用途                             |
| ------------------- | ------------------------------ |
| `strA + strB`       | 拼接字符串 `strA` 和 `strB`          |
| `strA = strB`       | 将字符串 `strB` 赋值给字符串 `strA`      |
| `strA == strB`      | 判断字符串 `strA` 和 `strB` 是否相同     |
| `strA > strB`（或小于号） | 根据字典序比较字符串 `strA` 和 `strB` 的大小 |

## 三、函数

### 3.1 函数的定义和意义

编程领域的**函数**（Function）指的是完成特定功能的一段程序，也被称为**方法**。在编程中，函数体现在把许多代码封装起来，再统一调用。

{% hint style="info" %}
使用函数并不会优化程序运行的时间，但是可以减少重复性操作的代码量。另外，可以通过将不同部分的代码封装给不同的函数，从而是各函数各司其职，便于理清思路。
{% endhint %}

### 3.2 函数的语法

#### 3.2.1 定义函数

```cpp
函数数据类型 函数名(参数) {
    执行语句;
    return 函数返回值;
}
```

**举例一**

```cpp
int add(int a, int b) { // 定义整型函数并传入a和b两个整型变量作为参数
    return a+b; // 返回a+b的值
}
```

**举例二**

```cpp
void p() { // 定义无返回值函数
    int a = 10, b = 10;
    cout << a << " " << b; // 直接输出结果而没有返回值
}
```

#### 3.2.2 调用函数

```cpp
函数名(参数); // 若没有参数，括号内留空
```

### 3.3 参数

函数的**参数**（Parameter）分为**形式参数**（形参）和**实际参数**（实参）两种。一般情况下，定义函数时在括号内填入的参数是形式参数，并没有一个事先就固定的值，只是代表**这里有一个参数**的意思，可以理解为是占位用的。而调用函数时在括号内填入的参数是固定的值，会传给函数作为参数，这种参数是实际参数。

{% hint style="info" %}
形参和实参的关系是，调用函数时，实参的值对应传递给形参。
{% endhint %}

### 3.4 作用域、局部变量与全局变量

一个变量的**作用域**表示这个变量起作用的范围。在函数体内、结构体内、循环体内声明的变量，只会在当前代码块（即大括号之间的代码段）内部起作用。这种函数体、结构体和循环体以内定义的变量，称为**局部变量**。例如，在主函数内定义的变量，只会在主函数范围内起作用。此外，不属于任何函数体的变量，也就是在任何函数体之外声明的变量，称为**全局变量**。全局变量在其定义后的整个程序范围内起作用。

{% hint style="info" %}
当局部变量和全局变量发生冲突时，同一个变量名的值取决于这个变量最终的值，可以理解为**就近原则**，也就是在变量被调用前，距离被调用处最近的、变量被修改后的值。局部变量的修改一般不会影响全局变量的值。
{% endhint %}

### 3.5 值传递和引用传递

看以下代码：

```cpp
#include <bits/stdc++.h>
using namespace std;

int a, b;

void pp(int a, int &b){  // 引用传递需要在变量名前加一个&符号
	a += 10;
	b += 10;
	cout << a << " " << b;
}

int main() {
	cin >> a >> b;
	pp(a, b);
	cout << endl << a << " " << b;
	return 0;
}

// 输入：100 100
// 输出：110 110
// 	 100 110
```

如果按照定义与分析的话，变量 `b` 第二次输出时会按照主函数内输入的值 `100` 输出，但是最终的输出值却是 `110`。这是因为在给函数 `pp()` 传递参数时，对于变量 `a` 采用了**值传递**方式，对于变量 `b` 采用了**引用传递**方式（体现在变量名前加一个 `&` 号）。值传递方式只会把输入的值作为参数代入函数运算，引用传递方式所传递的变量会影响这个变量在全局的值。所以 `b` 变量经过函数后变成了 `110`，因为使用引用传递，所以最终输出的值也是 `110`。

### 3.6 判断质数

判断质数的函数非常常用，具体推导方式请参考[第 8 课笔记的第一子目](lesson-8.md#yi-pan-duan-zhi-shu)，代码如下——

```cpp
bool is_prime(int x) {
    if (x <= 1) return 0; // 若小于1则直接判否
    for (int i = 2; i*i <= x; i++) {
        if (x%i == 0) return 0; // 若可以被其他数整除则直接判否
    return 1; // 若不符合上述任何情况则判是
}
```
